import gql from 'graphql-tag'

import { MEDIA_FRAGMENT } from './media.gql'

export const SEARCH_ENTITY_FRAGMENT = gql`
  fragment SearchEntityFields on SearchEntity {
    content
    created
    entityId
    id
    subtitle
    title
    in {
      ... on Space {
        name
        slug
      }
    }
    by {
      ... on Member {
        name
      }
    }
    media {
      ...MediaFragment
    }
    entityType
    __typename
  }
  ${MEDIA_FRAGMENT}
`

export const GET_SEARCH = gql`
  query search($input: SearchInput!) {
    search(input: $input) {
      totalCount
      hits {
        entityType
        hits {
          ...SearchEntityFields
        }
      }
    }
  }
  ${SEARCH_ENTITY_FRAGMENT}
`
